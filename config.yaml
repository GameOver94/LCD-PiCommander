# Hardware Configuration
hardware:
  i2c:
    address: 0x27
    port: 1
    cols: 16            # Updated for 16x2 Display
    rows: 2             # Updated for 16x2 Display

  # GPIO Pin Numbers (BCM numbering)
  inputs:
    encoder:
      clk: 12           # ROT_A
      dt: 6             # ROT_B
    buttons:
      # Mapping Logic:
      # Enter  -> ROT_SW (Encoder Push Button)
      # Back   -> BTN_SW1
      # Custom -> BTN_SW2
      # Unused -> BTN_SW3 (Pin 8) - Swap with 'custom' below if preferred
      
      enter: 13         # ROT_SW
      back: 25          # BTN_SW1
      custom: 11        # BTN_SW2
    
    pull_up: true       # Standard for buttons connecting to GND

# Quick Launch Configuration (Button 3 on Pin 8)
quick_launch:
  command: "docker ps --format '{{.Names}}'"  # Command to execute when Button 3 is pressed
  wait_for_key: true  # Whether to wait for a key press after showing output

# Menu Structure
# You can use wildcards like ${stats.method_name} to call SystemStats methods
# Available methods: get_ip, get_hostname, get_cpu_temp, check_internet,
#                    get_cpu_usage, get_memory, get_memory_percent,
#                    get_disk_usage, get_disk_percent, get_uptime,
#                    get_kernel, get_os
menu:
  - label: "System Info"
    items:
      - label: "IP Address"
        action: "${stats.get_ip}"
        wait_for_key: true
      - label: "Hostname"
        action: "${stats.get_hostname}"
        wait_for_key: true
      - label: "CPU Temp"
        action: "${stats.get_cpu_temp}"
        wait_for_key: true
      - label: "CPU Usage"
        action: "${stats.get_cpu_usage}"
        wait_for_key: true
      - label: "Memory"
        action: "${stats.get_memory}"
        wait_for_key: true
      - label: "Memory %"
        action: "${stats.get_memory_percent}"
        wait_for_key: true
      - label: "Disk Usage"
        action: "${stats.get_disk_usage}"
        wait_for_key: true
      - label: "Disk %"
        action: "${stats.get_disk_percent}"
        wait_for_key: true
      - label: "Uptime"
        action: "${stats.get_uptime}"
        wait_for_key: true
      - label: "OS"
        action: "${stats.get_os}"
        wait_for_key: true
      - label: "Kernel"
        action: "${stats.get_kernel}"
        wait_for_key: true
      - label: "Internet"
        action: "${stats.check_internet}"
        wait_for_key: true

  - label: "Advanced Stats"
    items:
      - label: "Full CPU Info"
        action: "cat /proc/cpuinfo | grep 'model name' | head -1"
        wait_for_key: true
      - label: "Load Average"
        action: "uptime | awk -F'load average:' '{print $2}'"
        wait_for_key: true
      - label: "Top Processes"
        action: "ps aux --sort=-%mem | head -6 | tail -5 | awk '{print $11}'"
        wait_for_key: true

  - label: "Docker"
    items:
      - label: "List Containers"
        action: "docker ps --format '{{.Names}}'"
        wait_for_key: true
      - label: "Restart Stack"
        action: "cd /home/pi/docker && docker compose restart"

  - label: "Power"
    items:
      - label: "Restart App"
        action: "systemctl restart pi-menu"
      - label: "Reboot"
        action: "sudo reboot"
      - label: "Shutdown"
        action: "sudo shutdown -h now"